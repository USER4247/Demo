<ChatBubble@Widget>:
    id: chtbld
    md_bg_color: [0, 0, 0, 0]
    size_hint_y: None
    height: 60
    adaptive_height: True
    
    padding: [10, 0, 10, 0]
    orientation: 'vertical'

    MDBoxLayout:
        id: box
        #width: 200
        height:msg_content.height
        size_hint: None, None
        radius: [10, 10, (1, -5), 10] if self.pos_hint == {'right': 1} else [10, 10, 10, (1, -5)]
        md_bg_color: app.theme_cls.bg_darkest if app.theme_cls.theme_style == 'Light' else app.theme_cls.bg_dark
        Spacer:
            id: wid1
        MDRelativeLayout:
            id: boxT
            MDLabel:
                id: msg_content
                text: root.msg
                font_size:15
                height: self.texture_size[1]
                width: msg_content.texture_size[0]
                text_size:  [None, None]
                size_hint_y: None
                halign: 'left'
                color: app.theme_cls.opposite_bg_normal

            MDBoxLayout:
                id: tc
                size_hint_y: None
                width:msg_content.texture_size[0]
                spacing: 3
                MDLabel:
                    id: timed
                    text: root.time
                    size: self.texture_size
                    size_hint_y: None
                    font_size: 9
                    bold: True
                    halign: 'right'
                    text_size: None, None
                    color: [.8, .8, .8, 1]
            Spacer:
                id: wid3
                height: 5
            MDFlatButton:
                #width: 200
                width: msg_content.texture_size[0]
                height:msg_content.texture_size[1]
                size_hint: None, None
                radius: [10, 10, (1, -5), 10] if self.pos_hint == {'right': 1} else [10, 10, 10, (1, -5)]
                md_bg_color: app.theme_cls.bg_darkest if app.theme_cls.theme_style == 'Light' else app.theme_cls.bg_dark
    
<Spacer@Widget>:
    id: wid
    width: 5
    size_hint: None, None